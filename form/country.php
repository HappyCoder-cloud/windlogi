<?php
$country_array = array(

"AD"=>"ANDORRA",

"AE"=>"UNITED ARAB ",

"AF"=>"AFGHANISTAN",

"AG"=>"ANTIGUA AND ",

"AL"=>"ALBANIA",

"AM"=>"ARMENIA",

"AN"=>"NETHERLAND A",

"AO"=>"ANGOLA",

"AR"=>"ARGENTINA",

"AT"=>"AUSTRIA",

"AU"=>"AUSTRALIA",

"AW"=>"ARUBA",

"AZ"=>"AZERBAIJAN",

"BA"=>"BOSNIA AND H",

"BB"=>"BARBADOS",

"BD"=>"BANGLADESH",

"BE"=>"BELGIUM",

"BF"=>"BURKINA FASO",

"BG"=>"BULGARIA",

"BH"=>"BAHRAIN",

"BI"=>"BURUNDI",

"BJ"=>"BENIN",

"BM"=>"BERMUDA",

"BN"=>"BRUNEI DARUS",

"BO"=>"BOLIVIA",

"BR"=>"BRAZIL",

"BS"=>"BAHAMAS",

"BT"=>"BHUTAN",

"BW"=>"BOTSWANA",

"BY"=>"BELARUS",

"BZ"=>"BELIZE",

"CA"=>"CANADA",

"CD"=>"CONGO (DEMOC",

"CF"=>"CENTRAL AFRI",

"CG"=>"CONGO",

"CH"=>"SWITZERLAND",

"CI"=>"COTE D-IVOIR",

"CK"=>"COOK ISLANDS",

"CL"=>"CHILE",

"CM"=>"CAMEROON",

"CN"=>"CHINA",

"CO"=>"COLOMBIA",

"CR"=>"COSTA RICA",

"CS"=>"SERBIA AND M",

"CU"=>"CUBA",

"CV"=>"CAPE VERDE",

"CY"=>"CYPRUS",

"CZ"=>"CZECH REPUBL",

"DE"=>"GERMANY",

"DJ"=>"DJIBOUTI",

"DK"=>"DENMARK",

"DM"=>"DOMINICA",

"DO"=>"DOMINICAN RE",

"DZ"=>"ALGERIA",

"EC"=>"ECUADOR",

"EE"=>"ESTONIA",

"EG"=>"EGYPT",

"EH"=>"WESTERN SAHA",

"ER"=>"ERITREA",

"ES"=>"SPAIN",

"ET"=>"ETHIOPIA",

"EU"=>"EUROPEAN UNI",

"FI"=>"FINLAND",

"FJ"=>"FIJI",

"FK"=>"FALKLAND ISL",

"FM"=>"MICRONESIA",

"FO"=>"FAROE ISLAND",

"FR"=>"FRANCE",

"FX"=>"FRANCE METRO",

"GA"=>"GABON",

"GB"=>"UNITED KINGD",

"GD"=>"GRENADA",

"GE"=>"GEORGIA",

"GF"=>"FRENCH GUIAN",

"GH"=>"GHANA",

"GI"=>"GIBRALTAR",

"GL"=>"GREENLAND",

"GM"=>"GAMBIA",

"GN"=>"GUINEA",

"GP"=>"GUADELOUPE",

"GQ"=>"EQUATORIAL G",

"GR"=>"GREECE",

"GT"=>"GUATEMALA",

"GU"=>"GUAM",

"GW"=>"GUINEA-BISSA",

"GY"=>"GUYANA",

"HK"=>"HONG KONG",

"HN"=>"HONDURAS",

"HR"=>"CROATIA",

"HT"=>"HAITI",

"HU"=>"HUNGARY",

"ID"=>"INDONESIA",

"IE"=>"IRELAND",

"IL"=>"ISRAEL",

"IN"=>"INDIA",

"IO"=>"BRITISH IND",

"IQ"=>"IRAQ",

"IR"=>"IRAN",

"IS"=>"ICELAND",

"IT"=>"ITALY",

"JM"=>"JAMAICA",

"JO"=>"JORDAN",

"JP"=>"JAPAN",

"KE"=>"KENYA",

"KG"=>"KYRGYZSTAN",

"KH"=>"CAMBODIA",

"KI"=>"KIRIBATI",

"KM"=>"COMOROS",

"KP"=>"N KOREA",

"KR"=>"REPUB KOREA",

"KW"=>"KUWAIT",

"KY"=>"CAYMAN ISLA",

"KZ"=>"KAZAKHSTAN",

"LA"=>"LAOS",

"LB"=>"LEBANON",

"LI"=>"LIECHTENSTE",

"LK"=>"SRI LANKA",

"LR"=>"LIBERIA",

"LS"=>"LESOTHO",

"LT"=>"LITHUANIA",

"LU"=>"LUXEMBOURG",

"LV"=>"LATVIA",

"LY"=>"LIBYA",

"MA"=>"MOROCCO",

"MC"=>"MONACO",

"MD"=>"MOLDOVA",

"MG"=>"MADAGASCAR",

"MK"=>"MACEDONIA",

"ML"=>"MALI",

"MM"=>"MYANMAR",

"MN"=>"MONGOLIA",

"MO"=>"MACAO",

"MP"=>"NORTHERN MA",

"MQ"=>"MARTINIQUE",

"MR"=>"MAURITANIA",

"MS"=>"MONTSERRAT",

"MT"=>"MALTA",

"MU"=>"MAURITIUS",

"MV"=>"MALDIVES",

"MW"=>"MALAWI",

"MX"=>"MEXICO",

"MY"=>"MALAYSIA",

"MZ"=>"MOZAMBIQUE",

"NA"=>"NAMIBIA",

"NC"=>"NEW CALEDONIA",

"NE"=>"NIGER",

"NG"=>"NIGERIA",

"NI"=>"NICARAGUA",

"NL"=>"NETHERLANDS",

"NO"=>"NORWAY",

"NP"=>"NEPAL",

"NR"=>"NAURU",

"NU"=>"NIUE",

"NZ"=>"NEW ZEALAND",

"OM"=>"OMAN",

"PA"=>"PANAMA",

"PE"=>"PERU",

"PF"=>"FRENCH POLY",

"PG"=>"PAPUA NEW G",

"PH"=>"PHILIPPINES",

"PK"=>"PAKISTAN",

"PL"=>"POLAND",

"PR"=>"PUERTO RICO",

"PS"=>"PALESTINIAN ",

"PT"=>"PORTUGAL",

"PW"=>"PALAU",

"PY"=>"PARAGUAY",

"QA"=>"QATAR",

"RE"=>"REUNION",

"RO"=>"ROMANIA",

"RU"=>"RUSSIAN FEDE",

"RW"=>"RWANDA",

"SA"=>"SAUDI ARABIA",

"SB"=>"SOLOMON ISLA",

"SC"=>"SEYCHELLES",

"SD"=>"SUDAN",

"SE"=>"SWEDEN",

"SG"=>"SINGAPORE",

"SI"=>"SLOVENIA",

"SK"=>"SLOVAKIA",

"SL"=>"SIERRA LEONE",

"SM"=>"SAN MARINO",

"SN"=>"SENEGAL",

"SO"=>"SOMALIA",

"SR"=>"SURINAME",

"ST"=>"SAO TOME AND",

"SV"=>"EL SALVADOR",

"SY"=>"SYRIAN ARAB",

"SZ"=>"SWAZILAND",

"TD"=>"CHAD",

"TG"=>"TOGO",

"TH"=>"THAILAND",

"TJ"=>"TAJIKISTAN",

"TK"=>"TOKELAU",

"TL"=>"TIMOR-LESTE",

"TM"=>"TURKMENISTAN",

"TN"=>"TUNISIA",

"TO"=>"TONGA",

"TP"=>"EAST TIMOR",

"TR"=>"TURKEY",

"TT"=>"TRINIDAD",

"TV"=>"TUVALU",

"TW"=>"TAIWAN",

"TZ"=>"TANZANIA",

"UA"=>"UKRAINE",

"UG"=>"UGANDA",

"UK"=>"UNITED KING",

"US"=>"UNITED STATE",

"UY"=>"URUGUAY",

"UZ"=>"UZBEKISTAN",

"VA"=>"VATICAN",

"VE"=>"VENEZUELA",

"VN"=>"VIET NAM",

"VU"=>"VANUATU",

"WS"=>"SAMOA",

"YE"=>"YEMEN",

"YU"=>"EX YUGOSLAV",

"ZA"=>"SOUTH AFRIC",

"ZM"=>"ZAMBIA",

"ZW"=>"ZIMBABWE",

);





  $language="";

  //$ip = $_SERVER['REMOTE_ADDR'];

//  $ip = "202.56.223.13";

  $hostname = gethostbyaddr($ip);





  $country_name=$country_array[trim(strtoupper(substr(strrchr($hostname, "."), 1)))];

  $country_code=trim(strtoupper(substr(strrchr($hostname, "."), 1)));

  if(trim(strtoupper(substr(strrchr($hostname, "."), 1))) == "LOCAL") 

	{

    	$country_name = "LAN";

    	$country_code = "N/A";

  	}

  if($hostname == $ip) 

	{

	$hostname = exec("host ".$ip. "2> /dev/null");

	}

  if(trim($hostname) == "" || $hostname == $ip || $country_name == "") 

	{

    	$ret=exec("whois ".$ip." | grep country 2> /dev/null");

    	if($ret != "") 

		{

      		$clk_land=strtolower(trim(substr(strrchr($ret, ":"), 1)));

      		$hostname .= " .".$clk_land;

      		$country_name=$country_array[trim(strtoupper(substr(strrchr($hostname, "."), 1)))];

      		$country_code=trim(strtoupper(substr(strrchr($hostname, "."), 1)));

    		} 

	else 

			{

      		$country_name = "LAN";

      		$country_code = "N/A";

    		}

  	}


?>
